import{r,j as e,b as D,c as x}from"./index-c2f2eaa0.js";import{c as C,B as h}from"./supabaseClient-9bf2aecd.js";import{D as M,b as I,c as E,d as T,f as S,C as z,I as B,e as R,a as g}from"./ReadmeBtn-f04dcc65.js";import{b as V}from"./utils-a3d7310c.js";import{u as F}from"./iconBase-2d2a4714.js";import{u as H}from"./useDispatch-34ae9a08.js";import"./index.esm-031ce029.js";const b=r.forwardRef(({className:i,...t},c)=>e.jsx("textarea",{className:C("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",i),ref:c,...t}));b.displayName="Textarea";function P({open:i,marker:t,layerId:c,className:U,onClose:l}){const{t:s}=F(),[d,j]=r.useState(t.name),[m,N]=r.useState(t.description),{mymaps:p,showMapID:u}=D(a=>a.maps),[k,w]=r.useState([]);r.useEffect(()=>{w(p.find(a=>a.id===u))},[u,p]);const f=H(),n=V(k),y=()=>{n.data.forEach(a=>{a.id===c&&a.markers.forEach(o=>{o.id===t.id&&(o.name=d,o.description=m)})}),f(x(n)),l()},v=()=>{n.data.forEach(a=>{a.markers=a.markers.filter(o=>o.id!==t.id)}),f(x(n)),l()};return e.jsx(M,{open:i,children:e.jsxs(I,{className:"modalContent moreUp","data-cy":"editMarkItemModal","aria-describedby":void 0,children:[e.jsx(E,{children:e.jsx(T,{children:s("common.edit")+s("common.mark")})}),e.jsxs(S,{onClick:l,className:"absolute z-50 right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-500 -mb-3",children:s("common.mark")+s("common.name")}),e.jsx(B,{defaultValue:d,onChange:a=>j(a.target.value),className:"w-full mb-4","data-cy":"markNameInput"}),e.jsx("label",{className:"text-sm text-slate-500 -mb-3",children:s("common.mark")+s("common.description")}),e.jsx(b,{defaultValue:m,onChange:a=>N(a.target.value),className:"w-full h-24","data-cy":"markDescriptionInput"})]}),e.jsxs(R,{className:"w-full flex flex-row flex-nowrap items-center",children:[e.jsx(g,{asChild:!0,children:e.jsx(h,{className:"w-[90px] shrink-0 mr-8 text-red-700 hover:text-red-500",variant:"ghost",size:"sm",onClick:v,"data-cy":"deleteMarkItem",children:s("common.delete")+s("common.mark")})}),e.jsx(g,{asChild:!0,children:e.jsx(h,{className:"grow shrink-0",type:"submit",onClick:y,"data-cy":"saveMarkItem",children:s("common.save")})})]})]})})}export{P as default};
