import{r as N,b as h,j as e,d as m,c as p,f}from"./index-83711429.js";import{A as M}from"./index.esm-9e3bdab0.js";import{R as b,M as v,B as w}from"./ReadmeBtn-ad55476f.js";import{d as y}from"./index.esm-caf470fa.js";import{B as o}from"./index-c4919f9c.js";import{D as C,a as d,b as D,c as k,d as B,e as S}from"./dialog-89bcc8fe.js";import{I as z}from"./input-e3b4232a.js";import{b as E,i as A}from"./utils-12d3311a.js";import{u as x}from"./useDispatch-453bc9af.js";import"./iconBase-f462483c.js";function F({map:s}){const[i,r]=N.useState(""),{mymaps:l,defaultMap:a}=h(t=>t.maps),n=x(),j=()=>{const t=E(s);t.name=i;const c=l.map(u=>u.id===s.id?t:u);n(m(c))},g=()=>{const t=l.filter(c=>c.id!==s.id);n(m(t)),a.id===s.id&&n(p(t.length>0?t[0]:{}))};return e.jsxs(C,{children:[e.jsx(d,{asChild:!0,children:e.jsx(o,{className:"w-full rounded-none bg-slate-600 text-white",children:"編輯"})}),e.jsxs(D,{className:"modalContent",children:[e.jsx(k,{children:e.jsx(B,{children:"編輯地圖"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-500 -mb-3",children:"地圖名稱"}),e.jsx(z,{id:"mapName",defaultValue:s.name,onChange:t=>r(t.target.value),className:"w-full"})]}),e.jsxs(S,{className:"w-full flex flex-row flex-nowrap items-center",children:[e.jsx(d,{asChild:!0,children:e.jsx(o,{className:"w-[90px] shrink-0 mr-8 text-red-700 hover:text-red-500",variant:"ghost",size:"sm",onClick:g,children:"刪除地圖"})}),e.jsx(d,{asChild:!0,children:e.jsx(o,{className:"grow shrink-0",type:"submit",onClick:j,children:"儲存"})})]})]})]})}function I({item:s}){const i=f(),r=x(),l=a=>{r(p(a)),i("/")};return e.jsxs("div",{className:"border border-gray-300 cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center my-4",onClick:()=>{l(s)},children:[e.jsx(y,{size:44,color:"#5bb531"}),e.jsx("p",{className:"text-center mt-2",children:s.name})]},s.id),e.jsx(F,{map:s})]})}function R(){const{mymaps:s}=h(a=>a.maps),i=f(),r=x(),l=()=>{const a=A();r(p(a)),r(m([...s,a])),i("/")};return e.jsxs("div",{className:"p-4",children:[s.length===0&&e.jsx(b,{}),e.jsx("button",{className:"w-full h-12 border-dashed border-2 text-gray-500",children:e.jsxs("div",{className:"flex justify-center relative",children:[e.jsx(v,{className:"absolute",type:"full"}),e.jsx(w,{size:24}),e.jsx("p",{className:"ml-2",children:"匯入地圖"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.map(a=>e.jsx(I,{item:a},a.id)),e.jsxs("div",{onClick:l,className:"p-4 border border-gray-300 flex flex-col justify-center items-center cursor-pointer",children:[e.jsx(M,{size:44,color:"#999"}),e.jsx("p",{className:"text-center mt-2 text-[#999]",children:"新增空白地圖"})]})]})]})}function P(){return e.jsx("div",{className:"w-full h-full",children:e.jsx(R,{})})}export{P as default};
