import{r as g,b as h,j as e,d as m,c as p,e as j}from"./index-c41bd997.js";import{A as b}from"./index.esm-6726d35c.js";import{D as M,a as o,b as v,c as w,d as y,I as C,e as D,M as k,B}from"./MapUploader-52825a2b.js";import{u as x,d as S}from"./index.esm-59e8243b.js";import{B as d}from"./index-24599694.js";import{b as z}from"./utils-9cc37e62.js";import"./iconBase-41eeea96.js";function A({map:s}){const[i,r]=g.useState(""),{mymaps:l,defaultMap:t}=h(a=>a.maps),n=x(),f=()=>{const a=z(s);a.name=i;const c=l.map(u=>u.id===s.id?a:u);n(m(c))},N=()=>{const a=l.filter(c=>c.id!==s.id);n(m(a)),t.id===s.id&&n(p(a.length>0?a[0]:null))};return e.jsxs(M,{children:[e.jsx(o,{asChild:!0,children:e.jsx(d,{className:"w-full rounded-none bg-slate-600 text-white",children:"編輯"})}),e.jsxs(v,{className:"modalContent",children:[e.jsx(w,{children:e.jsx(y,{children:"編輯地圖"})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-500 -mb-3",children:"地圖名稱"}),e.jsx(C,{id:"mapName",defaultValue:s.name,onChange:a=>r(a.target.value),className:"w-full"})]}),e.jsxs(D,{className:"w-full flex flex-row flex-nowrap items-center",children:[e.jsx(o,{asChild:!0,children:e.jsx(d,{className:"w-[90px] shrink-0 mr-8 text-red-700 hover:text-red-500",variant:"ghost",size:"sm",onClick:N,children:"刪除地圖"})}),e.jsx(o,{asChild:!0,children:e.jsx(d,{className:"grow shrink-0",type:"submit",onClick:f,children:"儲存"})})]})]})]})}function E({item:s}){const i=j(),r=x(),l=t=>{r(p(t)),i("/")};return e.jsxs("div",{className:"border border-gray-300 cursor-pointer",children:[e.jsxs("div",{className:"flex flex-col justify-center items-center my-4",onClick:()=>{l(s)},children:[e.jsx(S,{size:44,color:"#5bb531"}),e.jsx("p",{className:"text-center mt-2",children:s.name})]},s.id),e.jsx(A,{map:s})]})}function F(){const{mymaps:s}=h(t=>t.maps),i=j(),r=x(),l=()=>{const n={id:Date.now(),name:"新地圖",data:[]};r(p(n)),r(m([...s,n])),i("/")};return e.jsxs("div",{className:"p-4",children:[e.jsx("button",{className:"w-full h-12 border-dashed border-2 text-gray-500",children:e.jsxs("div",{className:"flex justify-center relative",children:[e.jsx(k,{className:"absolute",type:"full"}),e.jsx(B,{size:24}),e.jsx("p",{className:"ml-2",children:"匯入地圖"})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[s.map(t=>e.jsx(E,{item:t},t.id)),e.jsxs("div",{onClick:l,className:"p-4 border border-gray-300 flex flex-col justify-center items-center cursor-pointer",children:[e.jsx(b,{size:44,color:"#999"}),e.jsx("p",{className:"text-center mt-2",children:"新增空白地圖"})]})]})]})}function V(){return e.jsx("div",{className:"w-full h-full",children:e.jsx(F,{})})}export{V as default};
